<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title id="pageTitle">Tienda</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Leaflet CSS -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />

    <style>
      #map {
        height: 350px;
        border-radius: 12px;
      }
    </style>
  </head>

  <body class="bg-white text-gray-800">
    <!-- HERO -->
    <section id="heroSection" class="py-16 text-center">
      <h1 id="heroTitle" class="text-3xl md:text-4xl font-bold mb-4"></h1>
      <p id="heroSubtitle" class="text-lg mb-6"></p>
      <a
        id="heroButton"
        target="_blank"
        class="bg-black text-white px-6 py-3 rounded-lg inline-block"
      >
      </a>
    </section>

    <!-- PRODUCTOS -->
    <section id="productsSection" class="py-12 px-6 max-w-5xl mx-auto hidden">
      <h2 class="text-2xl font-bold text-center mb-8">Productos Destacados</h2>
      <div id="productsContainer" class="grid md:grid-cols-3 gap-6"></div>
    </section>

    <!-- MAPA -->
    <section id="mapSection" class="py-12 px-6 max-w-5xl mx-auto hidden">
      <h2 class="text-2xl font-bold text-center mb-6">Dónde Estamos</h2>
      <div id="map"></div>
    </section>

    <!-- INFO -->
    <section id="infoSection" class="py-10 text-center hidden">
      <h3 class="text-xl font-semibold mb-2">Información</h3>
      <p id="address"></p>
      <p id="hours"></p>
      <a id="instagramLink" target="_blank" class="text-blue-600 underline"></a>
    </section>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <script>
      fetch('data.json')
        .then((res) => res.json())
        .then((data) => {
          // TITLE
          document.title = data.business.name;
          document.getElementById('pageTitle').innerText = data.business.name;

          // HERO
          document.getElementById('heroTitle').innerText = data.hero.title;
          document.getElementById('heroSubtitle').innerText =
            data.hero.subtitle;

          const heroButton = document.getElementById('heroButton');
          heroButton.innerText = data.hero.buttonText;
          heroButton.href = `https://wa.me/${data.business.whatsapp}?text=${encodeURIComponent(data.hero.whatsappMessage)}`;

          // PRODUCTS
          if (data.sections.products) {
            document
              .getElementById('productsSection')
              .classList.remove('hidden');

            const container = document.getElementById('productsContainer');

            data.products.forEach((product) => {
              const card = document.createElement('div');
              card.className = 'border rounded-lg p-4 text-center';

              card.innerHTML = `
          <img src="${product.image}" class="w-full h-48 object-cover mb-4 rounded">
          <h3 class="font-semibold text-lg mb-2">${product.name}</h3>
          <p class="mb-2">${product.description}</p>
          <p class="font-bold mb-4">$${product.price}</p>
          <a target="_blank"
             class="bg-black text-white px-4 py-2 rounded inline-block"
             href="https://wa.me/${data.business.whatsapp}?text=${encodeURIComponent(product.whatsappMessage)}">
             ${product.buttonText}
          </a>
        `;

              container.appendChild(card);
            });
          }

          // MAPA
          if (data.sections.map) {
            document.getElementById('mapSection').classList.remove('hidden');

            const map = L.map('map').setView(
              [data.map.latitude, data.map.longitude],
              data.map.zoom,
            );

            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
              attribution: '&copy; OpenStreetMap contributors',
            }).addTo(map);

            L.marker([data.map.latitude, data.map.longitude])
              .addTo(map)
              .bindPopup(data.business.name)
              .openPopup();
          }

          // INFO
          if (data.sections.info) {
            document.getElementById('infoSection').classList.remove('hidden');
            document.getElementById('address').innerText =
              data.business.address;
            document.getElementById('hours').innerText = data.business.hours;

            const insta = document.getElementById('instagramLink');
            insta.innerText = `@${data.business.instagramHandle}`;
            insta.href = `https://instagram.com/${data.business.instagramHandle}`;
          }
        });
    </script>
  </body>
</html>
